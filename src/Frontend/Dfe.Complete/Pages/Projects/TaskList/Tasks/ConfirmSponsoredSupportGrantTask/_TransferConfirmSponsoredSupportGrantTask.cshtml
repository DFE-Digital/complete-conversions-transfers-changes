@using Dfe.Complete.Utils
@inject Microsoft.Extensions.Configuration.IConfiguration _configuration
@model Dfe.Complete.Pages.Projects.TaskList.Tasks.ConfirmSponsoredSupportGrantTask.ConfirmTransferGrantFundingLevelTaskModel

<form method="post">
    <input type="hidden" asp-for="TasksDataId" />
    <input type="hidden" asp-for="Type" />

    <govuk-checkboxes name="options">
        <govuk-checkboxes-fieldset>
            <govuk-checkboxes-fieldset-legend>
            </govuk-checkboxes-fieldset-legend>
            <govuk-checkboxes-item id="not-applicable" asp-for="@Model.NotApplicable" value="true" name="@nameof(Model.NotApplicable)" data-cy="@nameof(Model.NotApplicable)" checked="@Model.NotApplicable">
                <b>Not applicable</b>
            </govuk-checkboxes-item>
        </govuk-checkboxes-fieldset>
    </govuk-checkboxes>

    <div class="govuk-form-group">
        <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">What level of transfer grant funding is required?</legend>
        <div class="govuk-hint">
            <p>Confirm if the incoming trust will receive the standard transfer grant funding amount, or a higher level of fast track, intermediate or full sponsored grant.</p>
            <p>This can be changed later on if the trust finds they need more money.</p>
        </div>
        <govuk-details data-module="govuk-details" class="govuk-details">
            <govuk-details-summary>
                <span class="govuk-details__summary-text">Changing the grant amount if the trust needs more funding later</span>
            </govuk-details-summary>
            <govuk-details-text>
                <p>Trusts can discover new information that means they might need more funding than they first thought they would.</p>
                <p>When this happens, speak to your regional director. They will need to approve the new grant amount. You may need to write a business case for the additional funding.</p>
                <p>When the new funding is agreed and approved, the trust will need to complete a new grant claim form and send it to the grants team.</p>
                <p>You can then come back to this task and update the grant type information.</p>
            </govuk-details-text>
        </govuk-details>
    </div>

    <govuk-radios name="sponsored_support_grant_type" asp-for="@Model.SponsoredSupportGrantType">
        <govuk-radios-fieldset>
            <govuk-radios-fieldset-legend class="govuk-fieldset__legend--m">
            </govuk-radios-fieldset-legend>
            @{
                foreach (var type in Model.SponsoredSupportGrantTypes)
                {
                    <govuk-radios-item data-cy="grant_type_@type.ToDescription()" value="@type.ToDescription()">@type.ToDisplayDescription()</govuk-radios-item>
                }
            }
        </govuk-radios-fieldset>
    </govuk-radios>

    @await Html.PartialAsync("_TaskSaveAndReturn", new TaskSaveAndReturnModel(Model.Project, Model.CurrentUserTeam))
</form>