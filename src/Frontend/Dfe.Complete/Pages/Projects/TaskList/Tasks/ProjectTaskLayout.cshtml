@page "/projects/{projectId:guid}/tasks/{task_identifier}"
@using Dfe.Complete.Constants;
@model Dfe.Complete.Pages.Projects.TaskListModel
@{
    ViewData["Title"] = Model.Title;
    var backLink = string.Format(RouteConstants.ProjectTaskList, Model.ProjectId);
}

@section BeforeMain
{
    <govuk-back-link href="@backLink" xmlns="http://www.w3.org/1999/html" />
}

    <main class="govuk-main-wrapper app-content" id="main-content" role="main">
        <div class="govuk-grid-column-two-thirds">
            <span class="govuk-body govuk-!-font-weight-bold govuk-!-margin-bottom-1">asdfasfasfads</span>
            <h1 class="govuk-heading-l govuk-!-margin-bottom-4">@Model.Title</h1>
        </div>
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
                <form method="post" class="govuk-form-group govuk-!-margin-bottom-0">
                    <div class="govuk-form-group govuk-!-margin-bottom-2">
                        <label class="govuk-label" for="exampleField">Example Field</label>
                        <input class="govuk-input" type="text" id="exampleField" name="exampleField" />
                    </div>
                    <div class="govuk-button-group govuk-!-margin-bottom-0">
                        <button class="govuk-button" type="submit">Submit</button>
                    </div>
                </form>
            </div>
            <div class="govuk-grid-column-one-third">
                @if (Model.Notes != null && Model.Notes.Any())
                {
                    <aside>
                        <h2 class="govuk-heading-m govuk-!-margin-bottom-2">Task notes</h2>
                        <a class="govuk-button govuk-button--secondary govuk-!-margin-bottom-2" href="@Url.Page("/Projects/Notes/New", new { projectId = Model.ProjectId, task_identifier = Model.TaskIdentifier })">Add note</a>
                        <ul class="list-style-none govuk-!-margin-bottom-0">
                        @foreach (var note in Model.Notes)
                        {
                            <li class="govuk-!-margin-bottom-2">
                                <p class="govuk-body govuk-!-margin-bottom-0">@note.CreatedAt.ToString("dd MMM yyyy")</p>
                                <h3 class="govuk-heading-s govuk-!-padding-top-0 govuk-!-margin-bottom-1">@note.UserFullName</h3>
                                <p class="govuk-body govuk-!-margin-bottom-1">@note.Body</p>
                                <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible govuk-!-margin-bottom-2" />
                            </li>
                        }
                        </ul>
                    </aside>
                }
            </div>
        </div>
    </main>
