@page "/projects/{projectId}/tasks/proposed_capacity_of_the_academy"
@model Dfe.Complete.Pages.Projects.TaskList.Tasks.ConfirmProposedCapacityOfTheAcademy.ConfirmProposedCapacityOfTheAcademyModel
@inject Microsoft.Extensions.Configuration.IConfiguration _configuration
@inject Dfe.Complete.Services.ErrorService ErrorService
@{
    Layout = "_ProjectTaskLayout";
    ViewData["Title"] = "Confirm the proposed capacity of the academy";
}
@section TaskHeaderHintSection {
    <div class="govuk-hint">
        <p>You only need to complete this task if the new academy will get the full sponsored grant.</p>
        <p>Give the maximum number of pupils the new academy will be able to teach.</p>
        <govuk-details>
            <govuk-details-summary>
                <span class="govuk-details__summary-text">Why pupil capacity is needed</span>
            </govuk-details-summary>
            <govuk-details-text>
                <p>Pupil capacity numbers enable the ESFA (Education and Skills Funding Agency) to calculate how much SUG (start-up grant) funding is needed in the GAG (general annual grant) payment the new academy will receive.</p>
            </govuk-details-text>
        </govuk-details>
    </div>
}
@section TaskSection {
    <form method="post">
        <input type="hidden" asp-for="TasksDataId" />
        <govuk-checkboxes name="options">
            <govuk-checkboxes-fieldset>
                <govuk-checkboxes-fieldset-legend>
                </govuk-checkboxes-fieldset-legend>
                <govuk-checkboxes-item id="@nameof(Model.NotApplicable)" asp-for="@Model.NotApplicable" value="true" name="@nameof(Model.NotApplicable)" checked="@Model.NotApplicable">
                    <b>Not applicable</b>
                </govuk-checkboxes-item>
            </govuk-checkboxes-fieldset>
        </govuk-checkboxes>
        <div class="govuk-form-group">
            <h2 class="govuk-heading-l">Proposed capacity of the academy</h2>
            <div class="govuk-hint">
                <p>Ask the school to confirm what the proposed pupil capacity of the new academy will be on the day it opens.</p>
                <govuk-details>
                    <govuk-details-summary>
                        <span class="govuk-details__summary-text">Help confirming the academy's proposed capacity</span>
                    </govuk-details-summary>
                    <govuk-details-text>
                        <p>The proposed capacity is the maximum number of pupils and students the academy can teach.</p>
                        <p>The capacity should show the maximum number of pupils and students in primary, secondary and further education.</p>
                        <p>It is broken down into 3 categories:</p>
                        <ul>
                            <li>reception to year 6, also known as the "primary" age range or school phase</li>
                            <li>years 7 to year 11, also known as the "secondary" age range or school phase</li>
                            <li>years 12 and above, also known as "post-16" age range or school phase</li>
                        </ul>
                        <p>If you need help with the proposed capacity, email <a href="mailto:@_configuration["Emails:ProposedAcademyCapacity"]" class="govuk-link" target="_blank">@_configuration["Emails:ProposedAcademyCapacity"]</a>.</p>
                    </govuk-details-text>
                </govuk-details>
            </div> 
        </div>
        <govuk-input name="reception-to-six-years" inputmode="numeric" input-class="govuk-input--width-10" asp-for="@Model.ReceptionToSixYears">
            <govuk-input-label class="govuk-label--m"><b>What is the proposed capacity for pupils in reception to year 6?</b></govuk-input-label>
            <govuk-input-hint>
                <p>Enter 0 if the academy will not teach pupils in this age group</p>
            </govuk-input-hint>
            @if (ErrorService.HasErrorForKey("reception-to-six-years"))
            {
                <govuk-input-error-message>@(ErrorService.GetErrorMessage("reception-to-six-years"))</govuk-input-error-message>
            }
        </govuk-input> 
        <govuk-input id="seven-to-eleven-years" name="seven-to-eleven-years" inputmode="numeric" input-class="govuk-input--width-10" asp-for="@Model.SevenToElevenYears">
            <govuk-input-label class="govuk-label"><b>What is the proposed capacity for pupils in years 7 to 11?</b></govuk-input-label>
            <govuk-input-hint>Enter 0 if the academy will not teach pupils in this age group.</govuk-input-hint>
            @if (ErrorService.HasErrorForKey("seven-to-eleven-years"))
            {
                <govuk-input-error-message>@(ErrorService.GetErrorMessage("seven-to-eleven-years"))</govuk-input-error-message>
            }
        </govuk-input>
        <govuk-input id="twelve-or-above-years" name="twelve-or-above-years" inputmode="numeric" input-class="govuk-input--width-10" asp-for="@Model.TwelveOrAboveYears">
            <govuk-input-label class="govuk-label"><b>What is the proposed capacity for students in year 12 or above?</b></govuk-input-label>
            <govuk-input-hint>Enter 0 if the academy will not teach pupils in this age group.</govuk-input-hint>
            @if (ErrorService.HasErrorForKey("twelve-or-above-years"))
            {
                <govuk-input-error-message>@(ErrorService.GetErrorMessage("twelve-or-above-years"))</govuk-input-error-message>
            }
        </govuk-input>
        @await Html.PartialAsync("_TaskSaveAndReturn", new TaskSaveAndReturnModel(Model.Project, Model.CurrentUserTeam))
    </form>
}
